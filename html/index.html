<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <title>Ticket Routing Tool – Statistik</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- External CSS -->
    <link rel="stylesheet" href="../css/foundations.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/components.buttons.css">
    <link rel="stylesheet" href="../css/components.cards.css">
    <link rel="stylesheet" href="../css/components.tables.css">
    <link rel="stylesheet" href="../css/index.css">
</head>
<body>

<div class="app-shell">
    <!-- TOPBAR -->
    <header class="topbar">
        <div class="topbar-inner">
            <div class="brand">
                <div class="brand-logo">itm8</div>
                <div>
                    <div class="brand-text-main">
                        <div class="brand-title">Ticket Routing Tool</div>
                        <span class="brand-pill">Internal</span>
                    </div>
                    <div class="brand-subtitle">
                        Routing performance &amp; kvalitetsoverblik
                    </div>
                </div>
            </div>

            <!-- Højre side: navigation + settings-tandhjul -->
            <div class="topbar-right">
                <nav class="topbar-nav">
                    <a href="./index.html" class="nav-link nav-link-active">
                        <span class="dot"></span>
                        <span>Dashboard</span>
                    </a>
                    <a href="./departments.html" class="nav-link">
                        <span class="dot"></span>
                        <span>Departments</span>
                    </a>
                </nav>

                <div class="settings-menu">
                    <button
                            id="settingsButton"
                            class="settings-button"
                            type="button"
                            aria-haspopup="true"
                            aria-expanded="false"
                            aria-label="Åbn indstillinger"
                    >
                        <span class="settings-icon">⚙</span>
                    </button>

                    <div id="settingsDropdown" class="settings-dropdown" aria-label="Settings menu">
                        <div class="settings-group-label">Indstillinger</div>
                        <button class="settings-item" type="button" data-setting="theme">
                            Skift tema
                        </button>
                        <button class="settings-item" type="button" data-setting="refresh">
                            Opdater data
                        </button>
                        <hr class="settings-divider">
                        <button class="settings-item" type="button" data-setting="logout">
                            Log ud
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- SIDEINDHOLD -->
    <main class="page">
        <div id="liveStatus" class="visually-hidden" aria-live="polite"></div>
        <section class="hero">
            <div class="hero-left">
                <div class="hero-overline">Routing performance</div>
                <h1>Quality of ticket <span>routing</span></h1>
                <p>
                    Overblik over hvor præcist systemet fordeler tickets på tværs af teams – og hvordan
                    routingkvaliteten udvikler sig over tid.
                </p>
            </div>
            <div class="hero-meta">
                <span class="pill pill-soft">
                    <span class="pill-dot"></span>
                    Live data
                </span>
                <div class="hero-updated">
                    <span class="hero-updated-label">Sidst opdateret</span>
                    <span class="hero-updated-value" id="lastUpdated"></span>
                </div>

                <!-- Tilbage-knap – styres af index.js -->
                <button id="backToDepartments" class="back-button">
                    <span class="arrow">←</span>
                    <span>Tilbage til departments</span>
                </button>
            </div>
        </section>

        <!-- JS skriver her dashboardet ind -->
        <section id="output" class="fade-in">
            <div class="card">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Indlæser statistik...</p>
                </div>
            </div>
            <div id="ticket-output"></div>
        </section>

        <!-- Department Ticket List – kun vist i department-view -->
        <section id="departmentTicketListSection">
            <h2>Department Ticket List</h2>
            <div id="ticket-list" role="status" aria-live="polite">Loading...</div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer class="footer">
        <span>itm8 • Ticket Routing Tool</span>
        <span class="footer-divider">•</span>
        <span>Internal dashboard</span>
    </footer>
</div>

<div id="loadingOverlay" class="loading-overlay" aria-live="polite" aria-busy="true">
    <div class="loading">
        <div class="spinner"></div>
        <p>Opdaterer data...</p>
    </div>
</div>

<!-- JS -->
<script type="module" src="../js/index.js"></script>
<script type="module" src="../js/tickets.js"></script>
<script type="module" src="../js/navTransitions.js"></script>

</body>
</html>
